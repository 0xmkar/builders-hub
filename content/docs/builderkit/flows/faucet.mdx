---
title: Faucet Flow
description: "Pre-built and customizable flow for interacting with token faucets on test networks."
---

import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";

# Faucet Flow

The Faucet flow provides a complete interface for requesting test tokens from faucets on Avalanche test networks.

## Backend Requirements

The Faucet flow requires a backend API to handle token distribution and rate limiting. You'll need to implement the following endpoints:

```typescript
// Required API Endpoints
POST /api/faucet/request
  body: {
    address: string;    // Recipient address
    token: string;      // Token symbol
    chainId: number;    // Network ID
  }
  response: {
    requestId: string;  // Unique request identifier
  }

GET /api/faucet/status/:requestId
  response: {
    status: 'pending' | 'completed' | 'failed';
    txHash?: string;    // Transaction hash if completed
    error?: string;     // Error message if failed
  }
```

We provide an example implementation using Next.js API routes, but you can use any backend technology. Note that the example implementation uses in-memory storage and is for demonstration purposes only. For production use, you should:

- Implement persistent storage for request tracking
- Add proper rate limiting per address/IP
- Include security measures (API keys, CORS, etc.)
- Handle concurrent requests appropriately
- Manage token distribution limits

## Basic Usage

```tsx
import { Faucet } from '@avalabs/builderkit';

function App() {
  const tokens = [
    // Array of tokens following the BaseToken interface
    // See /docs/builderkit/tokens for configuration details
    ...
  ];

  return (
    <Faucet 
      chainId={43113}  // Fuji Testnet
      tokens={tokens}
    />
  );
}
```

## Configuration

### Required Props

| Prop | Type | Description |
|------|------|-------------|
| `chainId` | `number` | ID of the test network |
| `tokens` | `Token[]` | List of supported tokens |

### Token Configuration

Each token in the `tokens` array should have the following structure:

```typescript
interface Token {
  address: string;      // Contract address or "native" for native token
  name: string;         // Token name
  symbol: string;       // Token symbol
  decimals: number;     // Token decimals
  chain_id: number;     // Chain ID where token exists
}
```

### Optional Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `className` | `string` | - | Additional CSS classes |

## Features

The Faucet flow includes:
- Token selection interface
- Balance display
- Request handling
- Status tracking
- Timeout management

### Building Custom Flows

The Faucet flow exposes individual components that you can use to build your own custom faucet interface:

```tsx
import { 
  FaucetProvider,
  TokenSelector,
  FaucetButton,
  RequestStatus,
  BalanceDisplay
} from '@avalabs/builderkit/faucet/components';

function CustomFaucet() {
  const tokens = [
    // Array of tokens following the BaseToken interface
    // See /docs/builderkit/tokens for configuration details
    ...
  ];

  return (
    <FaucetProvider
      chainId={43113}
      tokens={tokens}
    >
      <div className="space-y-4">
        <TokenSelector onSelect={handleTokenSelect} />
        <BalanceDisplay token={selectedToken} address={userAddress} />
        <FaucetButton token={selectedToken} />
        <RequestStatus requestId={currentRequestId} />
      </div>
    </FaucetProvider>
  );
}
```

## Using Code

Request funds from the faucet programmatically

<Tabs defaultValue="javascript">
  <TabsList>
    <TabsTrigger value="javascript">Javascript SDK</TabsTrigger>
    <TabsTrigger value="python">Python SDK</TabsTrigger>
    <TabsTrigger value="go">Go SDK</TabsTrigger>
    <TabsTrigger value="curl">Curl</TabsTrigger>
    <TabsTrigger value="python-requests">Python</TabsTrigger>
    <TabsTrigger value="go-http">GO</TabsTrigger>
  </TabsList>

  <TabsContent value="javascript">
    First, initialize a Node.js project, then install the Avalanche SDK.

    ```bash
    npm install @avalanche-sdk/sdk
    ```

    Add the following code to a JavaScript file in your project. Execute it in your terminal with 'node yourFile.js' to retrieve the balance.

    ```javascript
    import { AvalancheSDK } from "ava-labs/avalanche-sdk";

    const avax = new AvalancheSDK({
      serverURL: "https://api.avax.network",
      chainId: "43114",
    });

    async function run() {
      // Create a faucet request that returns a Faucet transaction, which can be used to retrieve the transaction hash.
      // Assuming 'wallet' and 'balance' are defined and initialized elsewhere in your code.
      // For example:
      // const wallet = avax.PChain().keyChain().importKey(process.env.PRIVATE_KEY);
      // const balance = await wallet.getBalance();
      let faucetTransaction;
      try {
        faucetTransaction = await wallet.faucet();

        // Wait for the faucet transaction to land on-chain.
        await faucetTransaction.wait();

        // Faucet transaction completed successfully
        // You could add proper logging here in production
      } catch (error) {
        // Handle error appropriately in production
        console.error('Faucet request failed:', error);
      }
    }

    run();
    ```
  </TabsContent>

  <TabsContent value="python">
    First, install the Avalanche Python SDK.

    ```bash
    pip install avalanche-sdk
    ```

    Add the following code to a Python file in your project:

    ```python
    from avalanche_sdk import AvalancheSDK

    # Initialize the SDK
    avax = AvalancheSDK(
        server_url="https://api.avax.network",
        chain_id="43114"
    )

    async def request_faucet():
        try:
            # Create a faucet request
            # Assuming wallet is initialized elsewhere
            faucet_transaction = await wallet.faucet()
            
            # Wait for transaction confirmation
            await faucet_transaction.wait()
            
            print("Faucet request completed successfully")
            
        except Exception as error:
            print(f"Faucet request failed: {error}")

    # Run the faucet request
    import asyncio
    asyncio.run(request_faucet())
    ```
  </TabsContent>

  <TabsContent value="go">
    First, install the Avalanche Go SDK.

    ```bash
    go mod init faucet-example
    go get github.com/ava-labs/avalanche-sdk-go
    ```

    Add the following code to your Go project:

    ```go
    package main

    import (
        "context"
        "fmt"
        "log"
        
        "github.com/ava-labs/avalanche-sdk-go"
    )

    func main() {
        // Initialize the SDK
        client := avalanche.NewClient("https://api.avax.network")
        
        ctx := context.Background()
        
        // Request faucet funds
        err := requestFaucet(ctx, client)
        if err != nil {
            log.Fatalf("Faucet request failed: %v", err)
        }
        
        fmt.Println("Faucet request completed successfully")
    }

    func requestFaucet(ctx context.Context, client *avalanche.Client) error {
        // Assuming wallet is initialized elsewhere
        faucetTx, err := wallet.Faucet(ctx)
        if err != nil {
            return fmt.Errorf("failed to create faucet transaction: %w", err)
        }
        
        // Wait for transaction confirmation
        err = faucetTx.Wait(ctx)
        if err != nil {
            return fmt.Errorf("faucet transaction failed: %w", err)
        }
        
        return nil
    }
    ```
  </TabsContent>

  <TabsContent value="curl">
    Use curl to make direct HTTP requests to the faucet API:

    ```bash
    # Request faucet funds
    curl -X POST https://api.avax.network/ext/bc/C/rpc \
      -H "Content-Type: application/json" \
      -d '{
        "jsonrpc": "2.0",
        "method": "avax.sendToken",
        "params": {
          "address": "YOUR_ADDRESS_HERE",
          "amount": "1000000000000000000",
          "assetID": "AVAX"
        },
        "id": 1
      }'
    ```
  </TabsContent>

  <TabsContent value="python-requests">
    Use Python's requests library to interact with the faucet:

    ```python
    import requests
    import json

    def request_faucet_funds(address, amount="1000000000000000000"):
        url = "https://api.avax.network/ext/bc/C/rpc"
        
        payload = {
            "jsonrpc": "2.0",
            "method": "avax.sendToken",
            "params": {
                "address": address,
                "amount": amount,
                "assetID": "AVAX"
            },
            "id": 1
        }
        
        headers = {
            "Content-Type": "application/json"
        }
        
        try:
            response = requests.post(url, data=json.dumps(payload), headers=headers)
            response.raise_for_status()
            
            result = response.json()
            print(f"Faucet request successful: {result}")
            return result
            
        except requests.exceptions.RequestException as e:
            print(f"Faucet request failed: {e}")
            return None

    # Example usage
    your_address = "YOUR_ADDRESS_HERE"
    request_faucet_funds(your_address)
    ```
  </TabsContent>

  <TabsContent value="go-http">
    Use Go's net/http package to make faucet requests:

    ```go
    package main

    import (
        "bytes"
        "encoding/json"
        "fmt"
        "io"
        "net/http"
    )

    type FaucetRequest struct {
        JsonRPC string `json:"jsonrpc"`
        Method  string `json:"method"`
        Params  struct {
            Address string `json:"address"`
            Amount  string `json:"amount"`
            AssetID string `json:"assetID"`
        } `json:"params"`
        ID int `json:"id"`
    }

    func requestFaucetFunds(address string) error {
        url := "https://api.avax.network/ext/bc/C/rpc"
        
        req := FaucetRequest{
            JsonRPC: "2.0",
            Method:  "avax.sendToken",
            ID:      1,
        }
        req.Params.Address = address
        req.Params.Amount = "1000000000000000000"
        req.Params.AssetID = "AVAX"
        
        jsonData, err := json.Marshal(req)
        if err != nil {
            return fmt.Errorf("failed to marshal request: %w", err)
        }
        
        resp, err := http.Post(url, "application/json", bytes.NewBuffer(jsonData))
        if err != nil {
            return fmt.Errorf("failed to make request: %w", err)
        }
        defer resp.Body.Close()
        
        body, err := io.ReadAll(resp.Body)
        if err != nil {
            return fmt.Errorf("failed to read response: %w", err)
        }
        
        fmt.Printf("Faucet request successful: %s\n", string(body))
        return nil
    }

    func main() {
        address := "YOUR_ADDRESS_HERE"
        if err := requestFaucetFunds(address); err != nil {
            fmt.Printf("Faucet request failed: %v\n", err)
        }
    }
    ```
  </TabsContent>
</Tabs>